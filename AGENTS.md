# AGENTS.md

このファイルは AI エージェント（GitHub Copilot、Cursor、Claude など）がプロジェクトを理解するためのガイドラインです。

## プロジェクト概要

M5Stack Unit-Roller485 を Python から制御するためのモジュールです。RS485 シリアル通信を介してモーター制御、ステータス読み出し、I2C 転送などの操作を行えます。

## ディレクトリ構成

- `roller485/` - メインの Python モジュール
- `tests/` - テストスクリプト
- `docs/` - ドキュメント

## コーディング規約

### 言語・スタイル

- Python 3.9 以上を使用
- 型ヒントを積極的に使用する
- PEP 8 に準拠したコードスタイル
- PEP 484 タイプヒントガイドラインに従う

### 命名規則

- 変数名、関数名、メソッド名は snake_case を使用
- クラス名は PascalCase を使用
- 定数は UPPER_SNAKE_CASE を使用

### コメント

- 関数やクラスには docstring を追加
- Googleスタイルのdocstringを推奨
- 複雑なロジックには適切なコメントを追加

### インポート

- 未使用のインポートは削除する

## 開発コマンド

- format: `ruff format .`
- lint: `ruff check .`
- typecheck: `mypy .`
- test: `pytest tests/`

## パッケージ管理

- uvを使用して依存関係を管理
- 開発用依存関係は `--dev` フラグを使用してインストール

## Git ワークフロー

- コミット前に各サブプロジェクトの lint / typecheck を確認
- Git hooks はリポジトリのトップレベル `/git-hooks/` で管理
- セットアップ: `cp git-hooks/* .git/hooks/`

## AI エージェントへの指示

- **AGENTS.md の自己更新**: プロジェクト構成や規約に変更があった場合、対応する AGENTS.md も更新すること
  - 新しいディレクトリ構成を追加した場合 → リポジトリ構成セクションを更新
  - 新しい技術スタックを導入した場合 → 該当サブプロジェクトの AGENTS.md を更新
  - 新しいコーディング規約を追加した場合 → 該当する AGENTS.md に追記
  - 既存の規約が古くなった場合 → 積極的に更新・削除
  - PEP 8の基準に則り、１行が長すぎる場合は改行して可読性を向上させること
